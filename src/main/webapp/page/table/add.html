<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>富文本编辑器</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../lib/layui-v2.5.5/css/layui.css" media="all">
    <link rel="stylesheet" href="../../lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="stylesheet" href="../../css/public.css" media="all">
    <script src="../../lib/layui-v2.5.5/layui.js" charset="utf-8"></script>
</head>
<body>
<button class="layui-btn layui-btn-sm data-add-btn" id="but"> 返回</button>
<div id="add-user-layer" style="display: block; padding: 20px">
    <form class="layui-form" action="" method="post" id="add-user-form">
        <h1>基本信息</h1>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">客户名称:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cname" lay-verify="required|cname" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">拼音:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cspell" lay-verify="required|cspell" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">类别:</label>
                <div class="layui-input-inline">
                    <select name="cclass">
                        <option value="1">请选择</option>
                        <option value="2">客户类别一</option>
                        <option value="3">客户类别二</option>
                        <option value="4">客户类别三</option>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">客户来源:</label>
                <div class="layui-input-inline">
                    <select name="csource" lay-verify="required" lay-search="">
                        <option value="1">直接选择或搜索选择</option>
                        <option value="2">老客户</option>
                        <option value="3">代理商</option>
                        <option value="4">互联网</option>
                        <option value="5">独立开发</option>
                        <option value="6">客户介绍</option>
                        <option value="7">合作伙伴</option>
                        <option value="8">促销活动</option>
                        <option value="9">媒体宣传</option>
                        <option value="10">电话访问</option>
                        <option value="11">客户来电</option>
                        <option value="12">二次销售</option>
                        <option value="13">公开招标</option>
                        <option value="14">研讨会和展会</option>
                        <option value="15">其他</option>
                    </select>
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">所属行业:</label>
                <div class="layui-input-inline">
                    <select name="cindustry">
                        <option value="1" selected>请选择</option>
                        <option value="IT|互联网|通信|电子">IT|互联网|通信|电子</option>
                        <option value="金融|银行|保险">金融|银行|保险</option>
                        <option value="房产|建筑建设|物业">房产|建筑建设|物业</option>
                        <option value="广告|传媒|印刷出版">广告|传媒|印刷出版</option>
                        <option value="消费零售|贸易|交通物流">消费零售|贸易|交通物流</option>
                        <option value="加工制造|仪表设备">加工制造|仪表设备</option>
                        <option value="管理咨询|教育科研|中介服务">管理咨询|教育科研|中介服务</option>
                        <option value="医药生物|医疗保健">医药生物|医疗保健</option>
                        <option value="酒店旅游">酒店旅游</option>
                        <option value="能源矿产|石油化工">能源矿产|石油化工</option>
                        <option value="政府|非赢利机构|科研">政府|非赢利机构|科研</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">客户网址:</label>
                <div class="layui-input-inline">
                    <input type="text" name="curl" lay-verify="required|curl" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">国家/地区:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cnation" lay-verify="required|cnation" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">所在城市:</label>
                <div class="layui-input-inline">
                    <input type="text" name="ccity" lay-verify="required|ccity" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">详细地址:</label>
            <div class="layui-input-block">
                <input type="text" name="caddress" lay-verify="required|caddress" autocomplete="off"
                       placeholder="请输入详细地址" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">邮政编码:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cpostalcode" lay-verify="required|cpostalcode" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">传真:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cfax" lay-verify="required|cfax" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">联系人:</label>
                <div class="layui-input-inline">
                    <input type="text" name="clinkman" lay-verify="required|clinkman" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">部门:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cdept" lay-verify="required|cdept" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">职务:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cjob" lay-verify="required|cjob" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">办公电话:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cofficeno" lay-verify="required|cofficeno" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">移动电话:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cphonrno" id="phoneno" oninput="if(value.length>11)value=value.slice(0,11)"
                           lay-verify="required|cphonrno" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">邮箱:</label>
                <div class="layui-input-inline">
                    <input type="text" name="cemail" lay-verify="required|cemail" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">法人代表:</label>
                <div class="layui-input-inline">
                    <input type="text" name="clegalPerson" lay-verify="required|clegalPerson" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">注册资本:</label>
                <div class="layui-input-inline">
                    <input type="text" name="ccapital" lay-verify="required|ccapital" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">附加说明:</label>
            <div class="layui-input-block">
                <input type="text" name="cexplain" lay-verify="required|cexplain" autocomplete="off"
                       placeholder="请输入详细地址" class="layui-input">
            </div>
        </div>


        <div id="u636" class="ax_default box_1">
            <div id="u636_div" class=""></div>
            <div id="u636_text" class="text ">
                <p><span>财务信息</span></p>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">银行账号:</label>
                <div class="layui-input-inline">
                    <input type="text" name="mcarno" id="mcarno" oninput="if(value.length>18)value=value.slice(0,18)" lay-verify="required|mcarno" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">开户名称:</label>
                <div class="layui-input-inline">
                    <input type="text" name="mname" lay-verify="required|mname" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">开户银行:</label>
                <div class="layui-input-inline">
                    <input type="text" name="mbank" lay-verify="required|mbank" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">税号:</label>
                <div class="layui-input-inline">
                    <input type="text" name="mdutyno" lay-verify="required|mdutyno" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">电话:</label>
            <div class="layui-input-inline">
                <input type="text" name="mphoneno" id="dianhua" oninput="if(value.length>11)value=value.slice(0,11)" lay-verify="required|mphoneno" autocomplete="off"
                       class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="text-align: center">
            <div class="layui-input-block">
                <button class="layui-btn" lay-submit lay-filter="add-submit">立即提交</button>
                <button type="reset" class="layui-btn layui-btn-primary">重置</button>
            </div>
        </div>
    </form>
</div>
<script>
    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate,
            $ = layui.$;
        //创建一个编辑器
        var editIndex = layedit.build('LAY_demo_editor');

        $("#but").click(function () {
            window.parent.location.reload();
        });


        // 添加用户表单提交
        form.on('submit(add-submit)', function (data) {
            // ajax方式添加用户
            $.ajax({
                url: "../../customerManager/insert.do",
                type: "post",
                data: data.field,
                dataType: 'json',

                success: function (data) {
                    if (data == 0) {

                        layer.closeAll();
                        layer.msg('添加成功');
                        window.location.href = "/crmsystem/projectPage/customerManager/customer.html";
                        table.reload('test');
                        $("#add-user-form")[0].reset();
                    } else {
                        layer.msg('添加失败');
                    }
                },

            });
            // 阻止表单跳转
            return false;
        });

//电话正则表达式
        $("#phoneno").on('blur', function () {
            var p = /^((13[0-9])|(15[0-9])|(17[0-9])|(18[0-9]))\d{8}$/;
            if (p.test($("#phoneno").val()) == false) {
                layer.msg("请输入正确电话号码", {icon: 6});
            }
        });
        $("#dianhua").on('blur', function () {
            var p = /^((13[0-9])|(15[0-9])|(17[0-9])|(18[0-9]))\d{8}$/;
            if (p.test($("#dianhua").val()) == false) {
                layer.msg("请输入正确电话号码", {icon: 6});
            }
        });
        $("#mcarno").on('blur',function () {
            var a = /^(0|[1-9][0-9]*)$/;
            if (a.test($("#mcarno").val()) == false) {
                layer.msg("请输入正确银行卡号", {icon: 6});
            }
        });

    });
</script>
</body>
</html>
